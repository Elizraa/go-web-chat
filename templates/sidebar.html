{{ define "sidebar" }}

<nav id="sidebar">
    <div class="sidebar-header">
        <h3><i class="fas fa-globe"></i>
            <a href="/">Globes</a>
        </h3>
    </div>

    <ul class="list-unstyled components">
        <p>Let's Chat!</p>
        <!-- <li class="active">
            <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
                Home
            </a>
        </li> -->
        <li>
            <a href="#" data-toggle="modal" data-target="#create-modal">
                <i class="fas fa-plus-square"></i>
                Create a chat room
            </a>
        </li>
        <li>
            <a href="#" onclick="setInnerContent('/chats');" id="join-chats-btn">
                <i class="fas fa-comments"></i>
                Join a chat room
            </a>
        </li>
        <!-- <li>
            <a href="#pageSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
                <i class="fas fa-poll"></i>
                Trending
            </a>
            <ul class="collapse list-unstyled" id="pageSubmenu">
                <li>
                    <a href="#">Chat 1</a>
                </li>
                <li>
                    <a href="#">Chat 2</a>
                </li>
                <li>
                    <a href="#">Chat 3</a>
                </li>
            </ul>
        </li> -->
        <li>
            <a href="/">
                <i class="fas fa-home"></i>
                About
            </a>
        </li>
        <li>
            <a href="#" data-toggle="modal" data-target="#login-modal" class="login-btn">
                <i class="fas fa-sign-in-alt"></i>
                Login
            </a>
        </li>
    </ul>

    <ul class="list-unstyled CTAs">
        <li>
            <a href="#" class="download" onclick="alert('under construction!');">Talk to someone random!</a>
        </li>
    </ul>
</nav>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Check if username is in localStorage
        const username = localStorage.getItem("username");
        const color = localStorage.getItem("color");

        if (username) {
            // If username exists, create a circular profile
            const profileContainer = document.createElement("div");
            profileContainer.classList.add("profile-btn");

            const profileCircle = document.createElement("div");
            profileCircle.classList.add("profile-circle");
            profileCircle.style.backgroundColor = color || "#ccc";

            const usernameText = document.createTextNode(username);

            // Append elements
            profileCircle.appendChild(usernameText);
            profileContainer.appendChild(profileCircle);

            // Replace the existing login button with the profile
            const loginButton = document.querySelector('.login-btn');
            loginButton.replaceWith(profileContainer);
        }
    });
</script>
{{ end }}